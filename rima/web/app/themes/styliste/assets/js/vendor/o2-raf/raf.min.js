!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(this,function(e){function t(){for(var e={event:!1,callback:!1,data:!1,delegate:o,ref:!1},t=0;t<arguments.length;t++){var n=arguments[t],i=typeof n;"string"==i?e.event=n:"object"==i&&n.jquery||"boolean"==i?e.delegate=n:"function"==i?e.callback=n:"object"==i?e.data=n:"number"==i&&(e.ref=n)}return e}function n(){var n=this,r=document.body,a=document.documentElement;this.events=[],this.eventsCount=0,this.refCounter=0,this.request=void 0,this.scroll={top:window.pageYOffset,left:window.pageYOffset},this.win={width:0,height:0},this.doc={width:0,height:0},this.pointer={x:0,y:0},this.updateDataSources=function(){n.win=e.extend(n.win,c([i,a],["inner","client"])),n.doc=e.extend(n.doc,c([r,a],["inner","client","offset"]))},this.updateDataSources(),this.inits={afterdocumentresize:function(){n.on("documentresize",e(n))},afterwindowresize:function(){n.on("resize",e(n))},pointermove:function(){o.on("mousemove touchmove",{self:n},l)}},this.kills={afterdocumentresize:function(){n.off("documentresize",e(n))},afterwindowresize:function(){n.off("resize",e(n))},pointermove:function(){o.off("mousemove touchmove",l)}},this.detect={scroll:function(){var e={top:window.pageYOffset,left:window.pageXOffset};(e.top!==n.scroll.top||e.left!==n.scroll.left)&&(n.scroll=e,h(n.events.scroll))},resize:function(){var e={width:n.win.element[n.win.prefix+"Width"],height:n.win.element[n.win.prefix+"Height"]};if(e.width===n.win.width&&e.height===n.win.height){if(!n.win.sizeChanged)return;return delete n.win.sizeChanged,void h(n.events.afterwindowresize)}n.win.sizeChanged=!0,n.win.width=e.width,n.win.height=e.height,h(n.events.resize)},documentresize:function(){var e={width:n.doc.element[n.doc.prefix+"Width"],height:n.doc.element[n.doc.prefix+"Height"]};if(e.width===n.doc.width&&e.height===n.doc.height){if(!n.doc.sizeChanged)return;return delete n.doc.sizeChanged,void h(n.events.afterdocumentresize)}n.doc.sizeChanged=!0,n.doc.width=e.width,n.doc.height=e.height,h(n.events.documentresize)},pointermove:function(){n.newPointer&&(n.pointer.x!==n.newPointer.x||n.pointer.y!==n.newPointer.y)&&(n.pointer=n.newPointer,n.newPointer=void 0,h(n.events.pointermove,{pointer:n.pointer}))},nextframe:function(){h(n.events.nextframe),u("nextframe",n.events),n.eventsCount=f(n.events)},eachframe:function(){h(n.events.eachframe)}},this.on=function(){var e=t.apply(this,arguments);return e.event?(e.ref=n.refCounter++,n.events[e.event]||(n.events[e.event]=[],n.eventsCount=f(n.events),n.inits[e.event]&&n.inits[e.event]()),n.events[e.event].push(e),n.init(),e):n},this.off=function(){var e=t.apply(this,arguments);if(!n.events[e.event]&&!n.events[e.ref])return n;var i=n.events[e.event];if(e.delegate===!0)u(e.event,n.events);else{var o=d(e,i);o>-1&&u(o,i),0==i.length&&(u(e.event,n.events),n.kills[e.event]&&n.kills[e.event]()),e.ref=void 0}return n.eventsCount=f(n.events),n.eventsCount||n.kill(),e},this.play=function(){return[].push.call(arguments,"eachframe"),n.on.apply(this,arguments)},this.stop=function(){return[].push.call(arguments,"eachframe"),n.off.apply(this,arguments)},this.loop=function(){if(!n.eventsCount)return n.kill();for(var e in n.events)n.detect[e]&&n.detect[e]();n.request=window.requestAnimationFrame(n.loop)},this.init=function(){return n.request||n.loop(),n},this.kill=function(){return n.request&&(window.cancelAnimationFrame(n.request),n.request=void 0),n}}for(var i=this,o=e(window),r=0,a=["ms","moz","webkit","o"],s=0;s<a.length&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[a[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[s]+"CancelAnimationFrame"]||window[a[s]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-r)),i=window.setTimeout(function(){e(t+n)},n);return r=t+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)});var f=function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},u=function(e,t){if("string"==typeof e){var n=t[e];return delete t[e],n}return t.splice(e,1)},c=function(e,t){for(var n=0,i={element:void 0,prefix:void 0},o=0;o<e.length;o++)if(e[o])for(var r=0;r<t.length;r++)t[r]+"Height"in e[o]&&e[o][t[r]+"Height"]>n&&(n=e[o][t[r]+"Height"],i={element:e[o],prefix:t[r]});return i},d=function(e,t){if(e.ref){for(var n=0;n<t.length;n++)if(t[n].ref==e.ref)return n}else for(var n=0;n<t.length;n++)if(t[n].delegate[0]==e.delegate[0]&&t[n].callback==e.callback)return n;return-1},h=function(t,n){if(!t)return!1;n&&"object"!=typeof n&&(n=!1);for(var i=0;i<t.length;i++){var o=t[i];o.callback&&(n&&(o=e.extend(n,o)),o.callback(o))}},l=function(e){e.data.self.newPointer={x:e.pageX,y:e.pageY}};i.raf=new n,e(document).ready(function(){i.raf.updateDataSources()})});